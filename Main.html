<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>GestionG - Control de Finanzas</title>
</head>
<body>
    <!-- Encabezado principal -->
    <header>
        <div class="header-content">

            <h1>GestionG</h1>
            
            <div class="user-info">
                <span id="nombre-usuario-display">Cargando...</span>
                <button onclick="cerrarSesion()" class="btn-logout">Cerrar Sesion</button>
            </div>
        </div>
    </header>

    <main class="dashboard">
    <!-- ===============================================
        COLUMNA IZQUIERDA DE INGRESOS
        =============================================== -->

    <div class="columna-izquierda">
        <section id="ingresos">
            <h3>Registro de Ingresos</h3>
            <div class="formulario-ingreso">
                <label for="fecha-ingreso" style="font-size: 12px; color: #666;">Fecha del ingreso</label>
                <input type="date" id="fecha-ingreso">
                <input type="number" id="monto-ingreso" placeholder="Monto en pesos">
                <textarea id="desc-ingreso" placeholder="Descripci√≥n del ingreso" rows="2"></textarea>
                <button id="botonGuardarIngreso">Guardar Ingreso</button>
            </div>
        </section>

        <section id="historial-ingresos-section"> 
            <div class="header-tabla">
                <h3>Historial de Ingresos</h3>
                <button id="btn-exportar-ingresos" class="btn-exportar">Exportar</button>
            </div>
            
            <div class="tabla-contenedor"> <table id="tabla-ingresos">
                    <thead>
                        <tr>
                            <th>Fecha</th> 
                            <th>Descripci√≥n</th>
                            <th>Monto</th>
                            <th>Acci√≥n</th>
                        </tr>
                    </thead>
                    <tbody id="cuerpo-tabla-ingresos"></tbody>
                </table>
            </div>

            <div class="caja-total">
                <strong>Total ingresos: </strong>
                <span id="total-ingresos">$0</span>
            </div>
            <button id="btn-borrar-todo-ingresos" class="btn-limpiar">Borrar Historial</button>
        </section>
    </div>

    <!-- ===============================================
        COLUMNA CENTRAL DE GASTOS
        =============================================== -->
    <div class="columna-central">
        <section id="horario-gastos">
            <h2>Planificador de Gastos</h2>
            <div class="seccion-fecha-global">
                <h3>Fecha del gasto:</h3>
                <input type="date" id="fecha-global-registro">
            </div>
            <div class="seccion-gastos">
                <h3>Registro de gastos</h3>
                <div class="formulario-gasto">
                    <div class="lado-izquierdo-gasto">
                        <select id="categoria-gasto">
                            <option value="">Seleccionar categor√≠a</option>
                            <option value="Vivienda">üè† Vivienda</option>
                            <option value="Alimentacion">üçé Alimentaci√≥n</option>
                            <option value="Transporte">üöó Transporte</option>
                            <option value="Servicios">‚ö° Servicios</option>
                            <option value="Educacion">üìö Educaci√≥n</option>
                            <option value="Salud">üè• Salud</option>
                            <option value="Entretenimiento">üé¨ Entretenimiento</option>
                            <option value="Ropa">üëï Ropa</option>
                            <option value="Deudas">üí≥ Deudas</option>
                            <option value="Ahorros">üí∞ Ahorros</option>
                            <option value="Otros">üì¶ Otros</option>
                        </select>
                        <input type="number" id="valor-gasto-real" placeholder="Monto $">
                    </div>
                    <div class="lado-derecho-gasto">
                         <textarea id="desc-gasto" placeholder="Descripci√≥n (Ej: Arriendo)" rows="4"></textarea>
                    </div>
                </div>
                <button id="botonGuardarGasto">Guardar Gasto</button>
            </div>               
        </section>

        <section id="lista-proximos-pagos">
            <div class="header-historial">
                <h2>Historial de Gastos</h2>
                <button id="btn-exportar-gastos" class="btn-exportar">Exportar</button>
            </div>
            <div class="tabla-contenedor">
                <table id="tabla-historial">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Descripci√≥n</th>
                            <th>Categor√≠a</th>
                            <th>Costo</th>
                            <th>Prioridad</th>
                            <th>Acci√≥n</th>
                        </tr>
                    </thead>
                    <tbody id="cuerpo-historial"></tbody>
                </table>
                <div class="caja-total">
                    <strong>Total gastado: </strong>
                    <span id="total-gastado">$0</span>
                </div>
                <button id="botonBorrarHistorial" class="btn-limpiar">Borrar Historial</button>
            </div>
        </section>
    </div>

    <!-- ===============================================
        COLUMNA DERECHA DE GR√ÅFICO
        =============================================== -->
    <div class="columna-derecha">
        <section id="contenedor-grafico">
            <h3>Distribuci√≥n de Gastos</h3>
            <canvas id="graficoGastos"></canvas>
        </section>
    </div>
</main>

    <!-- Contenedor para notificaciones flotantes -->
    <div id="notificacion-container" class="notificacion-hidden"></div>

    <!-- Modal de confirmaci√≥n personalizado -->
    <div id="custom-modal" class="modal-hidden">
        <div class="modal-content">
            <h3 id="modal-titulo">¬øEstas seguro?</h3>
            <p id="modal-texto">Esta acci√≥n no se podr√° deshacer.</p>
            <div class="modal-actions">
                <button id="modal-confirmar" class="btn-danger">Confirmar</button>
                <button id="modal-cancelar" class="btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>

    <!-- Modal informativo -->
    <div id="modal-notificacion" class="modal-hidden">
        <div class="modal-content notificacion-card">
            <div id="icono-notificacion">‚úÖ</div>
            <div id="mensaje-notificacion-modal"></div>
            <div class="botones-modal-container" style="display: flex; flex-direction: column; gap: 10px;">
                <button id="btn-enviar-email-modal" class="btn-email">üìß Enviar resumen al correo</button>
                <button id="btn-cerrar-notif" class="boton-primario">Entendido</button>
            </div>
        </div>
    </div>

    <!-- Modal de eliminaci√≥n individual -->
    <div id="modal-confirmar-eliminar" class="modal-hidden">
        <div class="modal-content notification-card">
            <div style="font-size: 50px;">üóëÔ∏è</div>
            <p>¬øEst√°s seguro de que quieres eliminar este gasto?</p>
            <div style="display: flex; gap: 10px; justify-content: center;">
                <button id="btn-si-eliminar" class="btn-danger">S√≠, borrar</button>
                <button id="btn-no-eliminar" class="btn-secondary">Cancelar</button>
            </div>
        </div>
    </div>
    
    <!-- Llamado del gr√°fico -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    
    <!-- Llamado del script -->
    <script src="script.js"></script>
</body>
</html>